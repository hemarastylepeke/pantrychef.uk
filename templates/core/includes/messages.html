{% if messages %}
<div id="toast-messages" class="fixed bottom-5 right-5 z-50 space-y-4">
    {% for message in messages %}
        {% if message.tags == 'info' %}
            <div id="toast-{{ forloop.counter }}" class="flex items-center w-full max-w-xs p-4 text-blue-800 bg-blue-50 border border-blue-200 rounded-lg shadow-lg dark:bg-gray-800 dark:text-blue-400 dark:border-blue-800">
                <div class="inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-blue-600 bg-blue-100 rounded-lg">
                    <i class="fas fa-info-circle text-sm"></i>
                </div>
                <div class="ms-3 text-sm font-medium">{{ message }}</div>
                <button type="button" class="ms-auto -mx-1.5 -my-1.5 text-blue-600 hover:text-blue-800 rounded-lg p-1.5 inline-flex items-center justify-center h-8 w-8" onclick="closeToast('toast-{{ forloop.counter }}')">
                    <span class="sr-only">Close</span>
                    <i class="fas fa-times text-sm"></i>
                </button>
            </div>
        {% elif message.tags == 'success' %}
            <div id="toast-{{ forloop.counter }}" class="flex items-center w-full max-w-xs p-4 text-green-800 bg-green-50 border border-green-200 rounded-lg shadow-lg dark:bg-gray-800 dark:text-green-400 dark:border-green-800">
                <div class="inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-green-600 bg-green-100 rounded-lg">
                    <i class="fas fa-check-circle text-sm"></i>
                </div>
                <div class="ms-3 text-sm font-medium">{{ message }}</div>
                <button type="button" class="ms-auto -mx-1.5 -my-1.5 text-green-600 hover:text-green-800 rounded-lg p-1.5 inline-flex items-center justify-center h-8 w-8" onclick="closeToast('toast-{{ forloop.counter }}')">
                    <span class="sr-only">Close</span>
                    <i class="fas fa-times text-sm"></i>
                </button>
            </div>
        {% elif message.tags == 'warning' %}
            <div id="toast-{{ forloop.counter }}" class="flex items-center w-full max-w-xs p-4 text-amber-800 bg-amber-50 border border-amber-200 rounded-lg shadow-lg dark:bg-gray-800 dark:text-amber-400 dark:border-amber-800">
                <div class="inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-amber-600 bg-amber-100 rounded-lg">
                    <i class="fas fa-exclamation-triangle text-sm"></i>
                </div>
                <div class="ms-3 text-sm font-medium">{{ message }}</div>
                <button type="button" class="ms-auto -mx-1.5 -my-1.5 text-amber-600 hover:text-amber-800 rounded-lg p-1.5 inline-flex items-center justify-center h-8 w-8" onclick="closeToast('toast-{{ forloop.counter }}')">
                    <span class="sr-only">Close</span>
                    <i class="fas fa-times text-sm"></i>
                </button>
            </div>
        {% elif message.tags == 'error' %}
            <div id="toast-{{ forloop.counter }}" class="flex items-center w-full max-w-xs p-4 text-red-800 bg-red-50 border border-red-200 rounded-lg shadow-lg dark:bg-gray-800 dark:text-red-400 dark:border-red-800">
                <div class="inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-red-600 bg-red-100 rounded-lg">
                    <i class="fas fa-times-circle text-sm"></i>
                </div>
                <div class="ms-3 text-sm font-medium">{{ message }}</div>
                <button type="button" class="ms-auto -mx-1.5 -my-1.5 text-red-600 hover:text-red-800 rounded-lg p-1.5 inline-flex items-center justify-center h-8 w-8" onclick="closeToast('toast-{{ forloop.counter }}')">
                    <span class="sr-only">Close</span>
                    <i class="fas fa-times text-sm"></i>
                </button>
            </div>
        {% else %}
            <div id="toast-{{ forloop.counter }}" class="flex items-center w-full max-w-xs p-4 text-gray-800 bg-gray-50 border border-gray-200 rounded-lg shadow-lg dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600">
                <div class="inline-flex items-center justify-center flex-shrink-0 w-8 h-8 text-gray-600 bg-gray-100 rounded-lg">
                    <i class="fas fa-info-circle text-sm"></i>
                </div>
                <div class="ms-3 text-sm font-medium">{{ message }}</div>
                <button type="button" class="ms-auto -mx-1.5 -my-1.5 text-gray-600 hover:text-gray-800 rounded-lg p-1.5 inline-flex items-center justify-center h-8 w-8" onclick="closeToast('toast-{{ forloop.counter }}')">
                    <span class="sr-only">Close</span>
                    <i class="fas fa-times text-sm"></i>
                </button>
            </div>
        {% endif %}
    {% endfor %}
</div>

<script>
function closeToast(toastId) {
    const toast = document.getElementById(toastId);
    if (toast) {
        toast.style.transform = 'translateX(100%)';
        toast.style.opacity = '0';
        setTimeout(() => {
            toast.remove();
        }, 300);
    }
}

// Auto-dismiss messages after 5 seconds with smooth animation
document.addEventListener('DOMContentLoaded', function() {
    const toasts = document.querySelectorAll('[id^="toast-"]');
    toasts.forEach((toast) => {
        // Add entrance animation
        toast.style.transform = 'translateX(100%)';
        toast.style.opacity = '0';
        toast.style.transition = 'all 0.3s ease-in-out';
        
        setTimeout(() => {
            toast.style.transform = 'translateX(0)';
            toast.style.opacity = '1';
        }, 100);

        // Auto-dismiss after 5 seconds
        setTimeout(() => {
            if (toast && toast.parentNode) {
                toast.style.transform = 'translateX(100%)';
                toast.style.opacity = '0';
                setTimeout(() => {
                    if (toast && toast.parentNode) {
                        toast.remove();
                    }
                }, 300);
            }
        }, 5000);
    });
});

// Add hover pause functionality
document.addEventListener('DOMContentLoaded', function() {
    const toasts = document.querySelectorAll('[id^="toast-"]');
    let dismissTimeouts = {};

    toasts.forEach((toast) => {
        const toastId = toast.id;
        
        // Set initial timeout
        dismissTimeouts[toastId] = setTimeout(() => {
            closeToast(toastId);
        }, 5000);

        // Pause on hover
        toast.addEventListener('mouseenter', () => {
            if (dismissTimeouts[toastId]) {
                clearTimeout(dismissTimeouts[toastId]);
            }
        });

        // Resume on mouse leave
        toast.addEventListener('mouseleave', () => {
            dismissTimeouts[toastId] = setTimeout(() => {
                closeToast(toastId);
            }, 3000);
        });
    });
});
</script>

<style>
/* Custom animations for toast messages */
[id^="toast-"] {
    transition: all 0.3s ease-in-out;
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
}

/* Success toast specific styling */
.bg-green-50 {
    background-color: #f0fdf4;
    border-color: #bbf7d0;
}

.bg-green-100 {
    background-color: #dcfce7;
}

/* Warning toast specific styling */
.bg-amber-50 {
    background-color: #fffbeb;
    border-color: #fed7aa;
}

.bg-amber-100 {
    background-color: #fef3c7;
}

/* Error toast specific styling */
.bg-red-50 {
    background-color: #fef2f2;
    border-color: #fecaca;
}

.bg-red-100 {
    background-color: #fee2e2;
}

/* Info toast specific styling */
.bg-blue-50 {
    background-color: #eff6ff;
    border-color: #bfdbfe;
}

.bg-blue-100 {
    background-color: #dbeafe;
}
</style>
{% endif %}